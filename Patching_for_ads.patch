Subject: [PATCH] Patching for ads
---
Index: pubspec.yaml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pubspec.yaml b/pubspec.yaml
--- a/pubspec.yaml	(revision 64bbc49e53b02638393a3c271d2189afb9066064)
+++ b/pubspec.yaml	(date 1719160846258)
@@ -9,6 +9,8 @@
 
 dependencies:
   cached_network_image: ^3.3.1
+  core_ads:
+    path: packages/core/ads
   core_api_client:
     path: packages/core/api_client
   core_design:
Index: packages/features/player/lib/src/list/presentation/player_list.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/packages/features/player/lib/src/list/presentation/player_list.dart b/packages/features/player/lib/src/list/presentation/player_list.dart
--- a/packages/features/player/lib/src/list/presentation/player_list.dart	(revision 64bbc49e53b02638393a3c271d2189afb9066064)
+++ b/packages/features/player/lib/src/list/presentation/player_list.dart	(date 1719162233443)
@@ -1,3 +1,4 @@
+import 'package:core_ads/ads.dart';
 import 'package:core_design/design.dart';
 import 'package:core_domain/domain.dart';
 import 'package:feature_player/src/list/presentation/bloc/player_list_bloc.dart';
@@ -84,6 +85,9 @@
             return const SizedBox.shrink();
           },
           separatorBuilder: (context, index) {
+            if (index != 0 && index % 10 == 0) {
+              return const AppBannerAd();
+            }
             return SizedBox(height: spacingM.value);
           },
         );
Index: lib/main.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/main.dart b/lib/main.dart
--- a/lib/main.dart	(revision 64bbc49e53b02638393a3c271d2189afb9066064)
+++ b/lib/main.dart	(date 1719160922087)
@@ -1,3 +1,6 @@
+import 'dart:async';
+
+import 'package:core_ads/ads.dart';
 import 'package:core_design/design.dart';
 import 'package:fc_concept/di/injector.dart';
 import 'package:flutter/material.dart';
@@ -6,6 +9,7 @@
 
 Future<void> main() async {
   WidgetsFlutterBinding.ensureInitialized();
+  unawaited(MobileAds.instance.initialize());
   await initializeDi('dev');
 
   // final getClubs = di<GetClubsUseCase>();
Index: packages/features/player/pubspec.yaml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/packages/features/player/pubspec.yaml b/packages/features/player/pubspec.yaml
--- a/packages/features/player/pubspec.yaml	(revision 64bbc49e53b02638393a3c271d2189afb9066064)
+++ b/packages/features/player/pubspec.yaml	(date 1719161716660)
@@ -9,6 +9,8 @@
 
 dependencies:
   bloc_concurrency: ^0.2.5
+  core_ads:
+    path: ../../../packages/core/ads
   core_api_client:
     path: ../../../packages/core/api_client
   core_design:
Index: packages/core/ads/lib/src/app_banner_ad.dart
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/packages/core/ads/lib/src/app_banner_ad.dart b/packages/core/ads/lib/src/app_banner_ad.dart
new file mode 100644
--- /dev/null	(date 1719162169543)
+++ b/packages/core/ads/lib/src/app_banner_ad.dart	(date 1719162169543)
@@ -0,0 +1,73 @@
+import 'package:flutter/material.dart';
+import 'package:google_mobile_ads/google_mobile_ads.dart';
+
+const _adUnitId = 'ca-app-pub-3120340324769292/8582363603';
+
+class AppBannerAd extends StatefulWidget {
+  const AppBannerAd({
+    super.key,
+    this.adSize = AdSize.banner,
+  });
+
+  final AdSize adSize;
+
+  @override
+  State<AppBannerAd> createState() => _AppBannerAdState();
+}
+
+class _AppBannerAdState extends State<AppBannerAd> {
+  BannerAd? _bannerAd;
+
+  @override
+  void initState() {
+    super.initState();
+    _loadAd();
+  }
+
+  @override
+  void dispose() {
+    _bannerAd?.dispose();
+    super.dispose();
+  }
+
+  void _loadAd() {
+    final bannerAd = BannerAd(
+      size: widget.adSize,
+      adUnitId: _adUnitId,
+      request: const AdRequest(),
+      listener: BannerAdListener(
+        // Called when an ad is successfully received.
+        onAdLoaded: (ad) {
+          if (!mounted) {
+            ad.dispose();
+            return;
+          }
+          setState(() {
+            _bannerAd = ad as BannerAd;
+          });
+        },
+        // Called when an ad request failed.
+        onAdFailedToLoad: (ad, error) {
+          debugPrint('BannerAd failed to load: $error');
+          ad.dispose();
+        },
+      ),
+    );
+
+    // Start loading.
+    bannerAd.load();
+  }
+
+  @override
+  Widget build(BuildContext context) {
+    return SafeArea(
+      child: SizedBox(
+        width: widget.adSize.width.toDouble(),
+        height: widget.adSize.height.toDouble(),
+        child: _bannerAd == null
+            ? const SizedBox.shrink()
+            : AdWidget(ad: _bannerAd!),
+      ),
+    );
+  }
+}
Index: ios/Podfile.lock
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/ios/Podfile.lock b/ios/Podfile.lock
--- a/ios/Podfile.lock	(revision 64bbc49e53b02638393a3c271d2189afb9066064)
+++ b/ios/Podfile.lock	(date 1719306794772)
@@ -2,6 +2,13 @@
   - app_links (0.0.1):
     - Flutter
   - Flutter (1.0.0)
+  - Google-Mobile-Ads-SDK (11.2.0):
+    - GoogleUserMessagingPlatform (>= 1.1)
+  - google_mobile_ads (5.1.0):
+    - Flutter
+    - Google-Mobile-Ads-SDK (~> 11.2.0)
+    - webview_flutter_wkwebview
+  - GoogleUserMessagingPlatform (2.4.0)
   - path_provider_foundation (0.0.1):
     - Flutter
     - FlutterMacOS
@@ -13,20 +20,31 @@
     - FlutterMacOS
   - url_launcher_ios (0.0.1):
     - Flutter
+  - webview_flutter_wkwebview (0.0.1):
+    - Flutter
 
 DEPENDENCIES:
   - app_links (from `.symlinks/plugins/app_links/ios`)
   - Flutter (from `Flutter`)
+  - google_mobile_ads (from `.symlinks/plugins/google_mobile_ads/ios`)
   - path_provider_foundation (from `.symlinks/plugins/path_provider_foundation/darwin`)
   - shared_preferences_foundation (from `.symlinks/plugins/shared_preferences_foundation/darwin`)
   - sqflite (from `.symlinks/plugins/sqflite/darwin`)
   - url_launcher_ios (from `.symlinks/plugins/url_launcher_ios/ios`)
+  - webview_flutter_wkwebview (from `.symlinks/plugins/webview_flutter_wkwebview/ios`)
+
+SPEC REPOS:
+  trunk:
+    - Google-Mobile-Ads-SDK
+    - GoogleUserMessagingPlatform
 
 EXTERNAL SOURCES:
   app_links:
     :path: ".symlinks/plugins/app_links/ios"
   Flutter:
     :path: Flutter
+  google_mobile_ads:
+    :path: ".symlinks/plugins/google_mobile_ads/ios"
   path_provider_foundation:
     :path: ".symlinks/plugins/path_provider_foundation/darwin"
   shared_preferences_foundation:
@@ -35,14 +53,20 @@
     :path: ".symlinks/plugins/sqflite/darwin"
   url_launcher_ios:
     :path: ".symlinks/plugins/url_launcher_ios/ios"
+  webview_flutter_wkwebview:
+    :path: ".symlinks/plugins/webview_flutter_wkwebview/ios"
 
 SPEC CHECKSUMS:
   app_links: e70ca16b4b0f88253b3b3660200d4a10b4ea9795
   Flutter: e0871f40cf51350855a761d2e70bf5af5b9b5de7
+  Google-Mobile-Ads-SDK: 5a6d005a6cb5b5e8f4c7b69ca05cdea79c181139
+  google_mobile_ads: 9379c80fdfa9988fb0e105a407890ff8deb3cf86
+  GoogleUserMessagingPlatform: f131fa7978d2ba88d7426702b057c2cc318e6595
   path_provider_foundation: 2b6b4c569c0fb62ec74538f866245ac84301af46
   shared_preferences_foundation: fcdcbc04712aee1108ac7fda236f363274528f78
   sqflite: 673a0e54cc04b7d6dba8d24fb8095b31c3a99eec
   url_launcher_ios: 5334b05cef931de560670eeae103fd3e431ac3fe
+  webview_flutter_wkwebview: be0f0d33777f1bfd0c9fdcb594786704dbf65f36
 
 PODFILE CHECKSUM: 819463e6a0290f5a72f145ba7cde16e8b6ef0796
 
Index: ios/Runner.xcodeproj/project.pbxproj
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/ios/Runner.xcodeproj/project.pbxproj b/ios/Runner.xcodeproj/project.pbxproj
--- a/ios/Runner.xcodeproj/project.pbxproj	(revision 64bbc49e53b02638393a3c271d2189afb9066064)
+++ b/ios/Runner.xcodeproj/project.pbxproj	(date 1719306926324)
@@ -199,6 +199,7 @@
 				9705A1C41CF9048500538489 /* Embed Frameworks */,
 				3B06AD1E1E4923F5004D2608 /* Thin Binary */,
 				5367331814B0BC7ED15E5C10 /* [CP] Embed Pods Frameworks */,
+				95EB3CDFCA8613073C097158 /* [CP] Copy Pods Resources */,
 			);
 			buildRules = (
 			);
@@ -324,6 +325,23 @@
 			shellPath = /bin/sh;
 			shellScript = "\"${PODS_ROOT}/Target Support Files/Pods-Runner/Pods-Runner-frameworks.sh\"\n";
 			showEnvVarsInLog = 0;
+		};
+		95EB3CDFCA8613073C097158 /* [CP] Copy Pods Resources */ = {
+			isa = PBXShellScriptBuildPhase;
+			buildActionMask = 2147483647;
+			files = (
+			);
+			inputFileListPaths = (
+				"${PODS_ROOT}/Target Support Files/Pods-Runner/Pods-Runner-resources-${CONFIGURATION}-input-files.xcfilelist",
+			);
+			name = "[CP] Copy Pods Resources";
+			outputFileListPaths = (
+				"${PODS_ROOT}/Target Support Files/Pods-Runner/Pods-Runner-resources-${CONFIGURATION}-output-files.xcfilelist",
+			);
+			runOnlyForDeploymentPostprocessing = 0;
+			shellPath = /bin/sh;
+			shellScript = "\"${PODS_ROOT}/Target Support Files/Pods-Runner/Pods-Runner-resources.sh\"\n";
+			showEnvVarsInLog = 0;
 		};
 		9740EEB61CF901F6004384FC /* Run Script */ = {
 			isa = PBXShellScriptBuildPhase;
Index: pubspec.lock
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pubspec.lock b/pubspec.lock
--- a/pubspec.lock	(revision 64bbc49e53b02638393a3c271d2189afb9066064)
+++ b/pubspec.lock	(date 1719160913803)
@@ -241,6 +241,13 @@
       url: "https://pub.dev"
     source: hosted
     version: "3.1.1"
+  core_ads:
+    dependency: "direct main"
+    description:
+      path: "packages/core/ads"
+      relative: true
+    source: path
+    version: "0.0.1"
   core_api_client:
     dependency: "direct main"
     description:
@@ -457,6 +464,14 @@
       url: "https://pub.dev"
     source: hosted
     version: "6.2.1"
+  google_mobile_ads:
+    dependency: transitive
+    description:
+      name: google_mobile_ads
+      sha256: e2d18992d30b2be77cb6976b931112fc3c4612feffb5eb7a8b036bd7a64934da
+      url: "https://pub.dev"
+    source: hosted
+    version: "5.1.0"
   gotrue:
     dependency: transitive
     description:
@@ -1274,6 +1289,38 @@
       url: "https://pub.dev"
     source: hosted
     version: "2.4.5"
+  webview_flutter:
+    dependency: transitive
+    description:
+      name: webview_flutter
+      sha256: "6869c8786d179f929144b4a1f86e09ac0eddfe475984951ea6c634774c16b522"
+      url: "https://pub.dev"
+    source: hosted
+    version: "4.8.0"
+  webview_flutter_android:
+    dependency: transitive
+    description:
+      name: webview_flutter_android
+      sha256: f42447ca49523f11d8f70abea55ea211b3cafe172dd7a0e7ac007bb35dd356dc
+      url: "https://pub.dev"
+    source: hosted
+    version: "3.16.4"
+  webview_flutter_platform_interface:
+    dependency: transitive
+    description:
+      name: webview_flutter_platform_interface
+      sha256: d937581d6e558908d7ae3dc1989c4f87b786891ab47bb9df7de548a151779d8d
+      url: "https://pub.dev"
+    source: hosted
+    version: "2.10.0"
+  webview_flutter_wkwebview:
+    dependency: transitive
+    description:
+      name: webview_flutter_wkwebview
+      sha256: "7affdf9d680c015b11587181171d3cad8093e449db1f7d9f0f08f4f33d24f9a0"
+      url: "https://pub.dev"
+    source: hosted
+    version: "3.13.1"
   win32:
     dependency: transitive
     description:
